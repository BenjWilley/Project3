<!DOCTYPE html>
<html>
  <head>
    <title>Starbucks Locations Map</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAwxyr_8dczpsmNJBIj165H0BZ5Y1iQLKo&libraries=places"></script>
    <script>
      function initMap() {
        // Get the user's current location
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            // Create a map centered on the user's current location
            const map = new google.maps.Map(document.getElementById("map"), {
              center: {
                lat: position.coords.latitude,
                lng: position.coords.longitude
              },
              zoom: 14
            });
            // Search for Starbucks locations near the user's current location
            const request = {
              location: {
                lat: position.coords.latitude,
                lng: position.coords.longitude
              },
              radius: 1000, // 1 km
              query: "Starbucks"
            };
            const service = new google.maps.places.PlacesService(map);
            service.textSearch(request, function(results, status) {
              if (status === google.maps.places.PlacesServiceStatus.OK) {
                // Add markers to the map for each Starbucks location found
                for (let i = 0; i < results.length; i++) {
                  const place = results[i];
                  const marker = new google.maps.Marker({
                    position: place.geometry.location,
                    map: map,
                    title: place.name
                  });
                  // Add an info window to the marker that displays information about the Starbucks location
                  const infowindow = new google.maps.InfoWindow({
                    content: `<div><strong>${place.name}</strong><br>${place.formatted_address}</div>`
                  });
                  marker.addListener("click", function() {
                    infowindow.open(map, marker);
                  });
                }
              }
            });
          }, function() {
            alert("Geolocation failed. Please enable location services in your browser.");
          });
        } else {
          alert("Geolocation is not supported by your browser.");
        }
      }
    </script>
  </head>
  <body onload="initMap()">
    <div id="map" style="height: 400px; width: 100%;"></div>
  </body>
</html>
